(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{147:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),o=r.n(n),a=r(71),c=r(13),l=r(15),s=r(148),i=function(e){var t=e.value,r=e.localeContainId,n=Object(a.a)().formatMessage,i=n({id:"".concat(r,".zero")}),u=n({id:"".concat(r,".one")}),f=n({id:"".concat(r,".few")}),p=n({id:"".concat(r,".many")});return o.a.createElement(o.a.Fragment,null,0===t?o.a.createElement(c.a,{id:"numbers.zero"}):o.a.createElement(l.b,{value:t})," ",o.a.createElement(s.a,{value:t,zero:i,one:u,few:f,many:p}))}},148:function(e,t,r){"use strict";var n=r(0),o=r(34),a=function(e){var t=e.value,r=e.other,o=e.children,a=e.intl,c=a.formatPlural,l=a.textComponent,s=e[c(t,e)]||r;return"function"==typeof o?o(s):l?n.createElement(l,null,s):s};a.defaultProps={type:"cardinal"},a.displayName="FormattedPlural";var c=Object(o.c)(a);t.a=c},159:function(e,t,r){"use strict";r.r(t);var n=r(35),o=r.n(n),a=r(16),c=r.n(a),l=r(3),s=r.n(l),i=r(0),u=r.n(i),f=r(86),p=r(146),d=r(94),b=r(57),m=r(13),O=r(71),E=r(29),g=r(18),v=r(11),j=r(17),w=r(61),y=r(147),h=r(30),P=r(85),k=r(51);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=function(){var e=u.a.createElement(m.a,{id:"states.emptyprofile.description"}),t=u.a.createElement(m.a,{id:"states.emptyprofile.title"});return u.a.createElement(h.d,{title:t,subtitle:e})},D=function(){var e=u.a.createElement(m.a,{id:"states.profileend.description"}),t=u.a.createElement(m.a,{id:"states.profileend.title"});return u.a.createElement(h.d,{title:t,subtitle:e})},F=function(e){var t=e.posts,r=e.resPosts;return 0===t.length&&0===r.length?u.a.createElement(_,null):t.length>0&&0===r.length?u.a.createElement(D,null):null},x=function(e){var t=e.error,r=Object(O.a)().formatMessage,n=Object(P.c)(t);return"NOT_FOUND"===n?u.a.createElement(h.d,{code:n,title:r({id:"states.noprofile.title"}),subtitle:r({id:"states.noprofile.description"})}):u.a.createElement(h.d,{code:n})};t.default=function(){var e=Object(j.b)().add,t=Object(g.a)().user,r=Object(v.i)().user_id,n=Object(O.a)().formatMessage,a=Object(i.useState)(null),c=s()(a,2),l=c[0],m=c[1],h=l?l.posts:[],P=Object(E.b)(w.b),C=s()(P,2),_=C[0],D=C[1],S=Object(E.b)(w.d),z=s()(S,2),M=z[0],q=z[1];console.log(r);var H=Object(i.useState)({before:null}),I=s()(H,2),J=I[0],L=I[1],R=Object(E.c)({query:w.c,variables:N(N({},J),{},{member:r}),pause:!t||!r,requestPolicy:"network-only"}),U=s()(R,1)[0],T=Object(i.useCallback)((function(){return e({text:n({id:"errors.general"}),type:"danger"})}),[]);Object(i.useEffect)((function(){return _.error&&console.log(_.error)&&T()}),[_,T]),Object(i.useEffect)((function(){return M.error&&console.log(M.error)&&T()}),[M,T]),Object(i.useEffect)((function(){return U.error&&console.log(U.error)&&T()}),[U,T]),Object(i.useEffect)((function(){if(!U.error&&U.data)if(J.before)U.data.profile.posts.length>0&&m(N(N({},l),{},{posts:[].concat(o()(h),o()(U.data.profile.posts.map((function(e){return N(N({},e),{},{author:U.data.profile.user})}))))}));else{var e=U.data.profile;m(N(N({},e),{},{posts:[].concat(o()(h),o()(e.posts.map((function(t){return N(N({},t),{},{author:e.user})}))))}))}}),[U.data]);var Y=Object(i.useCallback)((function(){window.scrollY+window.innerHeight>document.body.clientHeight-100&&!U.fetching&&U.data.profile.posts.length>0&&L({before:l.posts[l.posts.length-1]._id})}),[U,h]);if(Object(i.useEffect)((function(){return window.addEventListener("scroll",Y),function(){return window.removeEventListener("scroll",Y)}}),[U,Y]),U.error)return u.a.createElement(x,{error:U.error});if(!l)return u.a.createElement(b.b,null);var A=l.user,B=A.displayName,G=A.tagline;return u.a.createElement(u.a.Fragment,null,u.a.createElement(k.a,{title:"titles.othersprofile",description:"titles.othersprofile.description",values:{displayName:B,tagline:G},path:"/".concat(l.user._id)}),u.a.createElement(f.a,{tick:u.a.createElement(y.a,{value:l.postCount,localeContainId:"plurals.post"})},l.user.displayName),u.a.createElement(d.a,{profile:l,onFollow:function(){var t=U.data.profile.user._id;D({member:t}).then((function(t){t.error||(e({text:n({id:"actions.followprofile.success"}),type:"success"}),m(N(N({},l),{},{following:!0})))}))},onUnfollow:function(){var t=U.data.profile.user._id;q({member:t}).then((function(t){t.error||(e({text:n({id:"actions.unfollowprofile.success"}),type:"success"}),m(N(N({},l),{},{following:!1})))}))}}),u.a.createElement(p.a,{feedRes:U,setPosts:function(e){return m(N(N({},l),{},{posts:e}))},feedResPosts:U.data.profile.posts,posts:l.posts}),U.fetching?u.a.createElement(b.b,null):null,u.a.createElement(F,{posts:h,resPosts:U.data.profile.posts}))}}}]);