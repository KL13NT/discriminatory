(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{158:function(e,t,n){"use strict";n.r(t);var r=n(35),a=n.n(r),c=n(16),o=n.n(c),s=n(3),l=n.n(s),i=n(0),u=n.n(i),d=n(86),f=n(146),b=n(93),p=n(13),m=n(71),O=n(29),E=n(18),w=n(31),h=n(87),j=n(92),v=n(57),g=n(20),y=n(30),P=n(85),k=n(51);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(){var e=u.a.createElement(p.a,{id:"states.emptyfeed.description",values:{explore:function(e){return u.a.createElement(g.b,{to:"/explore"},e)}}}),t=u.a.createElement(p.a,{id:"states.emptyfeed.title"});return u.a.createElement(y.d,{title:t,subtitle:e})},H=function(){var e=u.a.createElement(p.a,{id:"states.feedend.description"}),t=u.a.createElement(p.a,{id:"states.feedend.title"});return u.a.createElement(y.d,{title:t,subtitle:e})},x=function(e){var t=e.posts,n=e.resPosts;return 0===t.length&&0===n.length?u.a.createElement(q,null):t.length>0&&0===n.length?u.a.createElement(H,null):null};t.default=function(){var e=Object(w.a)().profile,t=Object(m.a)().formatMessage,n=Object(E.a)().user,r=Object(j.a)((function(e){return{posts:e.home,setPosts:e.setHome}})),c=r.posts,o=r.setPosts,s=Object(i.useState)({before:null}),p=l()(s,2),g=p[0],D=p[1],q=Object(O.c)({query:h.d,variables:S({},g),pause:!n,requestPolicy:"network-only"}),H=l()(q,2),F=H[0],J=H[1];Object(i.useEffect)((function(){F.data&&o([].concat(a()(c),a()(F.data.feed)))}),[F.data]);var L=Object(i.useCallback)((function(){window.scrollY+window.innerHeight>document.body.clientHeight-100&&!F.fetching&&F.data.feed.length>0&&D({before:c[c.length-1]._id})}),[F,c]);return Object(i.useEffect)((function(){return window.addEventListener("scroll",L),function(){return window.removeEventListener("scroll",L)}}),[F,L]),F.error?u.a.createElement(y.d,{code:Object(P.c)(F.error)}):F.data?u.a.createElement(u.a.Fragment,null,u.a.createElement(k.a,{title:"titles.home",description:"titles.home.description",path:"/home"}),u.a.createElement(d.a,null,t({id:"titles.home"})),u.a.createElement(b.b,{avatar:e.avatar,verified:n.email_verified,onSuccess:function(){J({requestPolicy:"network-only"})}}),u.a.createElement(f.a,{reFeed:J,feedResPosts:F.data.feed,posts:c,setPosts:o}),F.fetching?u.a.createElement(v.b,null):null,u.a.createElement(x,{posts:c,resPosts:F.data.feed})):u.a.createElement(v.b,null)}}}]);